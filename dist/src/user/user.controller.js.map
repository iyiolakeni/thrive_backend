{"version":3,"file":"user.controller.js","sourceRoot":"","sources":["../../../src/user/user.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,2CAYwB;AACxB,iDAA6C;AAC7C,6CAAyD;AACzD,2EAAsE;AAEtE,2EAAsE;AACtE,2DAAuD;AAEvD,sDAAmD;AACnD,iEAA4D;AAIrD,IAAM,cAAc,GAApB,MAAM,cAAc;IAC1B,YAA6B,WAAwB;QAAxB,gBAAW,GAAX,WAAW,CAAa;IAAG,CAAC;IAGnD,AAAN,KAAK,CAAC,MAAM,CAAS,aAA4B;QAChD,IAAI,CAAC;YACJ,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAC/C,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,IAAI,KAAK,YAAY,0BAAiB,EAAE,CAAC;gBACxC,MAAM,IAAI,sBAAa,CAAC,yBAAyB,EAAE,mBAAU,CAAC,QAAQ,CAAC,CAAC;YACzE,CAAC;YACD,MAAM,KAAK,CAAC;QACb,CAAC;IACF,CAAC;IAGD,WAAW;QACV,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;IACvC,CAAC;IAKK,AAAN,KAAK,CAAC,OAAO,CAAoB,QAAgB;QAChD,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAC3C,CAAC;IAMK,AAAN,KAAK,CAAC,UAAU,CACI,QAAgB,EAC3B,aAA4B;QAEpC,OAAO,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;IAC7D,CAAC;IAKK,AAAN,KAAK,CAAC,UAAU,CAAoB,QAAgB;QACnD,OAAO,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;IAC9C,CAAC;IAGK,AAAN,KAAK,CAAC,YAAY,CACT,KAAe;QAEvB,OAAO,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACrD,CAAC;IAGK,AAAN,KAAK,CAAC,aAAa,CACV,YAA8B;QAEtC,OAAO,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;IACrD,CAAC;CACD,CAAA;AA1DY,wCAAc;AAIpB;IADL,IAAA,aAAI,GAAE;IACO,WAAA,IAAA,aAAI,GAAE,CAAA;;qCAAgB,+BAAa;;4CAShD;AAGD;IADC,IAAA,YAAG,GAAE;;;;iDAGL;AAKK;IAHL,IAAA,kBAAS,EAAC,6BAAY,CAAC;IACvB,IAAA,uBAAa,GAAE;IACf,IAAA,YAAG,EAAC,WAAW,CAAC;IACF,WAAA,IAAA,cAAK,EAAC,UAAU,CAAC,CAAA;;;;6CAE/B;AAMK;IAJL,IAAA,cAAK,EAAC,WAAW,CAAC;IAClB,IAAA,kBAAS,EAAC,6BAAY,CAAC;IACvB,IAAA,uBAAa,GAAE;IAGd,WAAA,IAAA,cAAK,EAAC,UAAU,CAAC,CAAA;IACjB,WAAA,IAAA,aAAI,GAAE,CAAA;;6CAAgB,+BAAa;;gDAGpC;AAKK;IAHL,IAAA,eAAM,EAAC,WAAW,CAAC;IACnB,IAAA,kBAAS,EAAC,6BAAY,CAAC;IAEN,WAAA,IAAA,cAAK,EAAC,UAAU,CAAC,CAAA;;;;gDAElC;AAGK;IADL,IAAA,aAAI,EAAC,iBAAiB,CAAC;IAEtB,WAAA,IAAA,aAAI,GAAE,CAAA;;qCAAQ,oBAAQ;;kDAGvB;AAGK;IADL,IAAA,aAAI,EAAC,gBAAgB,CAAC;IAErB,WAAA,IAAA,aAAI,GAAE,CAAA;;qCAAe,qCAAgB;;mDAGtC;yBAzDW,cAAc;IAF1B,IAAA,mBAAU,EAAC,MAAM,CAAC;IAClB,IAAA,iBAAO,EAAC,cAAc,CAAC;qCAEmB,0BAAW;GADzC,cAAc,CA0D1B","sourcesContent":["import {\r\n\tBody,\r\n\tConflictException,\r\n\tController,\r\n\tDelete,\r\n\tGet,\r\n\tHttpException,\r\n\tHttpStatus,\r\n\tParam,\r\n\tPatch,\r\n\tPost,\r\n\tUseGuards,\r\n} from \"@nestjs/common\";\r\nimport { UserService } from \"./user.service\";\r\nimport { ApiBearerAuth, ApiTags } from \"@nestjs/swagger\";\r\nimport { CreateUserDto } from \"./dto/create-user.dto/create-user.dto\";\r\nimport { User } from \"src/entities/user.entity/user.entity\";\r\nimport { UpdateUserDto } from \"./dto/update-user.dto/update-user.dto\";\r\nimport { JwtAwthGuard } from \"src/auth/jwt-auth.guard\";\r\nimport { NotFoundResponse, SuccessResponse } from \"src/models/response.dto\";\r\nimport { EmailDto } from \"src/email/dto/email.dto\";\r\nimport { ResetPasswordDto } from \"./dto/reset_password.dto\";\r\n\r\n@Controller(\"User\")\r\n@ApiTags(\"User Details\")\r\nexport class UserController {\r\n\tconstructor(private readonly userService: UserService) {}\r\n\r\n\t@Post()\r\n\tasync create(@Body() createUserdto: CreateUserDto): Promise<User> {\r\n\t\ttry {\r\n\t\t\treturn this.userService.create(createUserdto);\r\n\t\t} catch (error) {\r\n\t\t\tif (error instanceof ConflictException) {\r\n\t\t\t\tthrow new HttpException(\"Username already exists\", HttpStatus.CONFLICT);\r\n\t\t\t}\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t}\r\n\r\n\t@Get()\r\n\tgetAllusers(): Promise<User[]> {\r\n\t\treturn this.userService.getAllUsers();\r\n\t}\r\n\r\n\t@UseGuards(JwtAwthGuard)\r\n\t@ApiBearerAuth()\r\n\t@Get(\":username\")\r\n\tasync getUser(@Param(\"username\") username: string): Promise<User> {\r\n\t\treturn this.userService.getUser(username);\r\n\t}\r\n\r\n\t@Patch(\":username\")\r\n\t@UseGuards(JwtAwthGuard)\r\n\t@ApiBearerAuth()\r\n\t// @UseGuards(LocalAuthGuard)\r\n\tasync updateUser(\r\n\t\t@Param(\"username\") username: string,\r\n\t\t@Body() updateUserDto: UpdateUserDto\r\n\t): Promise<User> {\r\n\t\treturn this.userService.updateUser(username, updateUserDto);\r\n\t}\r\n\r\n\t@Delete(\":username\")\r\n\t@UseGuards(JwtAwthGuard)\r\n\t// @UseGuards(LocalAuthGuard)\r\n\tasync deleteUser(@Param(\"username\") username: string): Promise<void> {\r\n\t\treturn this.userService.deleteUser(username);\r\n\t}\r\n\r\n\t@Post(\"forget-password\")\r\n\tasync resetPasword(\r\n\t\t@Body() email: EmailDto\r\n\t): Promise<SuccessResponse | NotFoundResponse> {\r\n\t\treturn this.userService.forgetPassword(email.email);\r\n\t}\r\n\r\n\t@Post(\"reset-password\")\r\n\tasync resetPassword(\r\n\t\t@Body() resetDetails: ResetPasswordDto\r\n\t): Promise<SuccessResponse | NotFoundResponse> {\r\n\t\treturn this.userService.resetPassword(resetDetails);\r\n\t}\r\n}\r\n"]}