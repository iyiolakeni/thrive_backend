{"version":3,"file":"local.strategy.js","sourceRoot":"","sources":["../../../src/auth/local.strategy.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,2CAAmE;AACnE,+CAAoD;AACpD,mDAAuC;AACvC,iDAA6C;AAGtC,IAAM,aAAa,GAAnB,MAAM,aAAc,SAAQ,IAAA,2BAAgB,EAAC,yBAAQ,CAAC;IACzD,YACY,WAAwB;QAEhC,KAAK,CAAC,EAAC,aAAa,EAAE,OAAO,EAAC,CAAC,CAAA;QAFvB,gBAAW,GAAX,WAAW,CAAa;IAGpC,CAAC;IAED,KAAK,CAAC,QAAQ,CAAC,KAAa,EAAE,QAAgB;QAC1C,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAClE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;QACjB,IAAG,CAAC,IAAI,EAAC,CAAC;YACN,MAAM,IAAI,8BAAqB,EAAE,CAAC;QACtC,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ,CAAA;AAfY,sCAAa;wBAAb,aAAa;IADzB,IAAA,mBAAU,GAAE;qCAGgB,0BAAW;GAF3B,aAAa,CAezB","sourcesContent":["import { Injectable, UnauthorizedException } from \"@nestjs/common\";\r\nimport { PassportStrategy } from \"@nestjs/passport\";\r\nimport {Strategy} from 'passport-local'\r\nimport { AuthService } from \"./auth.service\";\r\n\r\n@Injectable()\r\nexport class LocalStrategy extends PassportStrategy(Strategy){\r\n    constructor(\r\n        private authService: AuthService\r\n    ){\r\n        super({usernameField: 'email'})\r\n    }\r\n\r\n    async validate(email: string, password: string): Promise<any>{\r\n        const user = await this.authService.validateUser(email, password);\r\n        console.log(user)\r\n        if(!user){\r\n            throw new UnauthorizedException();\r\n        }\r\n        return user;\r\n    }\r\n}"]}